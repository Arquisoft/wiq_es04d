ifndef::imagesdir[:imagesdir: ../images]

[[section-deployment-view]]

== Vista de Despliegue 

=== Diagrama de Despliegue
Este diagrama ilustra c贸mo interact煤an los diferentes servicios del sistema.

image::07_diagrama_de_despliegue.jpg["Diagrama de despliegue"]

La arquitectura del sistema est谩 compuesta por varios servicios, cada uno contenerizado usando Docker y desplegados en una m谩quina virtual de Azure. A continuaci贸n se describen los servicios principales y su funci贸n dentro del sistema:

=== Servicios

1. *WebApp* +
Tecnolog铆a: React +
Descripci贸n: Interfaz de usuario que proporciona funcionalidades de inicio de sesi贸n, registro, juego y revisi贸n de historial y ranking. +
Interacci贸n: Comunica con el Gateway Service para todas las operaciones.

2. *Gateway Service* +
Tecnolog铆a: Express +
Descripci贸n: Act煤a como un proxy para los servicios internos, exponiendo una API unificada hacia la WebApp.

3. *User Service* +
Tecnolog铆a: Express +
Descripci贸n: Maneja operaciones relacionadas con usuarios, incluyendo inserci贸n de nuevos registros. +
Base de Datos: MongoDB (Colecci贸n: userdb).

4. *Auth Service* +
Tecnolog铆a: Express +
Descripci贸n: Procesa la autenticaci贸n de usuarios. +
Base de Datos: MongoDB (Colecci贸n: userdb).

5. *Question Service* +
Tecnolog铆a: Express +
Descripci贸n: Genera preguntas y realiza consultas a la API de Wikidata. +
Base de Datos: MongoDB (Colecci贸n: questiondb).

6. *History Service* +
Tecnolog铆a: Express +
Descripci贸n: Administra el historial de juegos de los usuarios y maneja el ranking. +
Base de Datos: MongoDB (Colecci贸n: historydb).

7. *MongoDB* +
Descripci贸n: Base de datos no relacional que almacena datos de usuarios, preguntas y historiales de juego.

=== Monitoreo

1. *Prometheus* +
Descripci贸n: Sistema de monitoreo y alerta que recolecta m茅tricas de los diferentes servicios. Utilizado para mantener la visibilidad del rendimiento y la salud operativa de los servicios dentro de la arquitectura del sistema. +
+
Configuraci贸n: Configurado para realizar scraping cada 5 segundos al servicio Gateway, que es el punto central de comunicaci贸n y datos para la aplicaci贸n. La configuraci贸n espec铆fica define un solo trabajo de scraping que apunta al servicio Gateway en el puerto 8000. Esta configuraci贸n est谩 dise帽ada para ser simple y directa, enfocada en la recolecci贸n eficiente de m茅tricas cr铆ticas.

2. *Grafana* +
Descripci贸n: Herramienta de visualizaci贸n y an谩lisis que transforma los datos recolectados por Prometheus en dashboards interactivos y detallados.
